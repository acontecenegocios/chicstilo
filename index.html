<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Catálogo Chicstilo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

<style>

body{
font-family: Arial;
background:#f4f4f4;
margin:0;
padding:10px;
}

.header{
background:black;
color:white;
padding:15px;
text-align:center;
font-size:20px;
}

.container{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
gap:10px;
margin-top:10px;
}

.card{
background:white;
border-radius:10px;
padding:10px;
}

.card img{
width:100%;
border-radius:10px;
margin-bottom:5px;
}

.codigo{
font-size:13px;
color:#666;
margin-bottom:5px;
}

.btn{
display:block;
background:green;
color:white;
text-align:center;
padding:10px;
margin-top:5px;
text-decoration:none;
border-radius:5px;
}

.btn:hover{
background:#0a8f0a;
}

</style>

</head>
<body>

<div class="header">
Catálogo Chicstilo
</div>

<div class="container" id="produtos"></div>

<script>

const supabaseClient = supabase.createClient(
"https://pupqmtogotalkrppzkzd.supabase.co",
"sb_publishable_mEb4-SGlEs8Sq7IM_UQl-Q_P-Yy1O4V"
);

const whatsapp = "5511978449058";

async function carregar(){

const { data, error } = await supabaseClient
.from("produtos")
.select("*")
.order("codigo",{ascending:true});

if(error){
console.error(error);
return;
}

const container = document.getElementById("produtos");
container.innerHTML="";

data.forEach(p => {

let fotosHTML = "";

// suporta até 5 fotos
if(p.foto_url) fotosHTML += `<img src="${p.foto_url}">`;
if(p.foto_url2) fotosHTML += `<img src="${p.foto_url2}">`;
if(p.foto_url3) fotosHTML += `<img src="${p.foto_url3}">`;
if(p.foto_url4) fotosHTML += `<img src="${p.foto_url4}">`;
if(p.foto_url5) fotosHTML += `<img src="${p.foto_url5}">`;

const msg = encodeURIComponent(
`Olá, tenho interesse no produto ${p.codigo} - ${p.marca}`
);

container.innerHTML += `

<div class="card">

<div class="codigo">
Código: ${p.codigo || ""}
</div>

${fotosHTML}

<b>${p.marca || ""}</b><br>

${p.tamanho ? "Tamanho: "+p.tamanho+"<br>" : ""}
${p.cor ? "Cor: "+p.cor+"<br>" : ""}
${p.preco ? "R$ "+p.preco+"<br>" : ""}

<a class="btn" target="_blank"
href="https://wa.me/${whatsapp}?text=${msg}">
Comprar
</a>

</div>

`;

});

}

carregar();

</script>

</body>
</html>
